# Estratégia de Transformação Digital e Governo Aberto na SME

Como um governo pode atuar para garantir o bem comum de todos? Na SME, acreditamos que um dos meios para isso seja garantir transparência e prestação de contas e constante relação entre governo e sociedade para o desenvolvimento e implementação de políticas públicas. 

A Portaria SME nº 8.008, de 12 de novembro de 2018 oficializou a estratégia da Secretaria Municipal de Educação de SP para que nossas ações sejam pautadas nos princípios de Governo Aberto e para usarmos os valores e benefícios do mundo digital para melhorarmos nossos processos e serviços para os cidadãos. 
Com isso, pretendemos: 
- aumentar os níveis de transparência ativa e de abertura de dados, garantindo a proteção de dados pessoais; 
- instituir metodologias ágeis e colaborativas como parte do processo de desenvolvimento e de evolução de sistemas administrativos e de serviços digitais; 
- fortalecer o controle das políticas educacionais e da aplicação de recursos por parte da gestão e da sociedade; 
- promover espaços e metodologias de colaboração entre governo, academia, sociedade civil e setor privado. 

O [Ateliê de Software](http://forum.govit.prefeitura.sp.gov.br/uploads/default/original/1X/c88a4715eb3f9fc3ceb882c1f6afe9e308805a17.pdf) é uma das ferramentas para operacionalização. Baseado em um modelo de contratação inspirado pelos movimentos ágil e de Software Craftsmanship, trabalhamos com equipes multidisciplinares para o desenvolvimento de produtos que beneficiam toda a comunidade escolar (técnicos da SME e DREs, gestores, professores, alunos e famílias) e concretizam os objetivos da Estratégia de Transformação Digital e Governo Aberto “Pátio Digital”.

# Conteúdo

 1. [Sobre o Produto](#Sobre-o-Produto)
 2. [Sobre o Time](#Sobre-o-Time)
 3. [Como surgiu](#Como-surgiu)
 4. [Links Úteis](#Links-Úteis)
 5. [Comunicação](#Comunicação)
 6. [Como contribuir](#como-contribuir)
 7. [Repositórios](#Repositórios)
 8. [Instalação e Configuração](#Instalação-e-Configuração)
 
# Sobre o Produto

## SIG-Escola
O Sistema Integrado de Gestão visa: a) apoiar os processos de gestão e prestação de contas de recursos financeiros das unidades educacionais da Rede Municipal de Educação de São Paulo, b) apoiar o acompanhamento e fiscalização dos referidos recursos pelas Diretorias Regionais de Educação e c) auxiliar na gestão e avaliação dos programas de transferência de recursos por parte da Secretaria Municipal de Educação. O Sistema inicialmente foi concebido para apoiar os processos de gestão e prestação de contas do Programa de Transferência de Recursos Financeiros (PTRF).

## PTRF
O Programa de Transferência de Recursos Financeiros (PTRF) foi instituído pela Secretaria Municipal de Educação em 2005, com objetivo de garantir maior autonomia às Unidades Educacionais. Os recursos são repassados às Associações de Pais e Mestres (APMs) e Associações de Pais e Mestres Servidores, Usuários e Amigos dos CEUs (APMSUAC), entidades responsáveis pelo recebimento, execução e prestação de contas dos recursos transferidos pela Secretaria Municipal de Educação (SME). A fiscalização da aplicação dos recursos financeiros é de responsabilidade das Diretorias Regionais de Educação (DRE) e da SME. Por meio do programa, a comunidade escolar participa do processo de decisão sobre o destino dos recursos repassados para manutenção e melhorias das Unidades Educacionais.

## Visão de Futuro

Para **Associações de Pais e Mestres (APMs) e Associações de Pais e Mestres Servidores, Usuários e Amigos dos CEUs (APMSUAC), servidores das Diretorias Regionais de Educação (DREs) e da Secretaria Municipal de Educação (SME)**

Que **realizam a gestão, execução, acompanhamento ou fiscalização dos recursos do Programa de Transferência de Recursos Financeiros (PTRF)**

O **SIG-Escola** 

É um **sistema na web**  

Que **apoia as Associações na gestão e prestação de contas dos recursos do Programa; as DREs, no acompanhamento e fiscalização das prestações de contas e a SME, na gestão e avaliação do Programa.**

Diferentemente da **realização das prestações de contas em planilha eletrônica, atualizadas a cada repasse**

O Nosso produto **busca promover maior agilidade e transparência nos processos de acompanhamento, prestação e fiscalização dos recursos do Programa.**

## Objetivos de Negócio

O SIG-Escola é um sistema inteligente de gestão que permite que escolas, associações, DREs e SME tenham otimização do trabalho relativo à gestão dos recursos do PTRF, garantindo não apenas mais eficiência em todos os processos como também aumentando a transparência e possibilitando um trabalho baseado em análise de dados.

- **É**: o Sistema Integrado de Gestão visa: a) apoiar os processos de gestão e prestação de contas de recursos financeiros das unidades educacionais da Rede Municipal de Educação de São Paulo, b) apoiar o acompanhamento e fiscalização dos referidos recursos pelas Diretorias Regionais de Educação e c) auxiliar na gestão e avaliação dos programas de transferência de recursos por parte da Secretaria Municipal de Educação. O Sistema inicialmente foi concebido para apoiar os processos de gestão e prestação de contas do Programa de Transferência de Recursos Financeiros (PTRF).

- **Não é**: uma substituição do processo administrativo de Prestação de Contas, encaminhados via [Sistema Eletrônico de Informações – SEI] (https://www.prefeitura.sp.gov.br/cidade/secretarias/gestao/processo_eletronico/sei/index.php?p=187710)

- **Faz**: torna os diversos processos exigidos pelo Programa realizáveis em formato digital, automatizando e/ou otimizando uma série de ações e proporcionando maior possibilidade de análise da execução de recursos, além de transparência para a população

- **Não faz**: não elimina/substitui a necessidade das obrigações das Associações, DREs e SME nos processos do Programa

## Personas

### Unidade Educacional/Associações 

**- Características principais:** os usuários iniciais serão os Diretores das associações e mais um servidor por este indicado
**- Necessidades:** maior facilidade e transparência nos processos de gestão e prestação de contas dos recursos do PTRF  
  
### DRE 

**- Características principais:** técnicos das diretorias 
**- Necessidades:** maior facilidade e transparência para acompanhar e fiscalizar a prestação de contas das associações e verificar a situação de regularidade das mesmas

### SME  

**- Características principais:** servidores da Secretaria Municipal de Educação
**- Necessidades:** aprimorar a gestão dos recursos do PTRF, facilitar e dar mais transparência no recebimento de documentos e comunicação com DREs e automatizar processos como a previsão de cálculo de repasses

## Funcionalidades

**Ferramenta de apoio às Unidades Educacionais/Associações**
- Dados da associação;  
- Lançamento e acompanhamento dos créditos e despesas;  
- Painel de dados;  
- Central de notificações;  
- Geração dos documentos para a prestação de contas (demonstrativo financeiro, relação de bens e atas de apresentação da prestação de contas);  
  
**Ferramenta de apoio às Diretorias Regionais de Educação**
- Dados da diretoria;  
- Atribuição de técnicos as associações;  
- Consulta das associações, verificação da regularidade e acompanhamento da prestação de contas;  
- Gestão do processo de análise e fiscalização da prestação de contas;  
- Geração de relatórios consolidados para a SME;  
  
**Ferramenta de apoio à Secretaria Municipal de Educação**  
- Painel de dados;  
- Cálculo dos repasses;  
- Geração de relatórios;

## Roadmap

## **Fase 1: Ferramenta de Apoio às Unidades Educacionais**

### Acesso, dados da Associação
- Acesso do usuário ao sistema
- Dados da Associação
- Extração de dados

### Painel de Ações, Despesas e Receitas
- Painel de Ações
- Gastos da Unidade Educacional (Despesas da Associação)
- Entregas (Créditos da Associação)

### Prestação de Contas
- Conciliação bancária
- Geração de documentos para prestação de contas

## **Fase 2: Apoio à Gestão e Aprimoramento do Apoio às Unidades Educacionais**

### Apoio às DREs
- Dados da Associaçã
- Geração de documentos para prestação de contaso
- Acompanhamento das PCs (conferência dos lançamentos e documentos)
- Acompanhamento das PCs (geraçnao de relatórios e devolução para acertos)
- Geração de relatório consolidado com os dados por DRE

### Apoio à SME
- Parametrizações do sistema
- Visualizaç˜åo e exportação dos saldos bancários
- Geração do relatório consolidado com os dados da SME

### Aprimoramento do apoio às Associações
- Painel de contas da escola (resumo de recursos)

### Geral
- Gestão de usuários (acesso, permissões, grupos de acesso)
- Notificações
- Central de downloads

## **Fase 3: Melhorias Associação e DRE**

### Cadastro de Despesa 
- Cadastro de estorno
- Cadastro de despesa de serviço com recolhimento de imposto
- Cadastro de despesa não reconhecida pela Associação
- Cadastro de despesa com pagamento antecipado

### Suporte aos Usuários
- Concessão de acesso à usuários de suporte às unidades subordinadas (a partir das visões de DRE e SME)

### Relatório Consolidado (DRE)
- Geração de documentos parciais (publicação parcial #1 e #2)
- Publicação única
- Relatório consolidado

### Cadastro e conferência dos valores reprogramados
- Valores reprogramados (Associação): melhoria na estrutura de cadastro
- Conferência dos valores reprogramados (DRE) independente da análida de Prestação de Contas

### Abertura Seletiva de Período
- Acompanhamento de Prestação de Contas (conferência de lançamentos e documentos): categorias de acertos que reabrem ou não para edição pela Associação
- Cadastro de crédito e de despesa: reabertura seletiva para correção da Associação
- Prestação de Contas (Associação): conferência da análise realizada pela DRE
- Prestação de Contas (Associação): geração dos documentos apenas quando há ajustes internos no sistema

## **Fase 4: Apoio à SME**

### Conferência da documentação da DRE pela SME
- Acompanhamento e análise da documentação gerada e dornecida pelas DREs (relatório consolidado)

### Extração de dados
- Extração de dados (créditos, despesas, prestações de contas etc.)

### Geração de relatórios
- Geração de relatórios por unidade e por ação (inicialmente)

### Parametrizações
- Parametrizações do sistema (legado)

## **Fase 5: Aprimoramento Associações**

### Situação patrimonial
- Relação dos bens adquiridos cadastrados
- Cadastro de bens produzidos

### Inativação de conta
- Solicitação de inativação pela Associação e validação pela DRE
- Ajustes nas funcionalidades após a desativação de uma conta (cadastro de créditos, despesas, resumo de recursos, prestação de contas, acompanhamento de prestação de contas etc.)

### Histórico de membros
- Dados da Associação (registro e manutenção do histórico de membros por período de atuação)

### Associações inadimplentes
- Autorização e criação de um período especial para a Prestação de Contas
- Geração da Prestação de Contas em um período ampliado
- Análise e geração de relatórios da DRE

## **Fase 6: Ampliação do Escopo e Início das Integrações**

### Novas unidades
- Inclusão de unidades previstas na RME e acompanhamento do início das atividades
- Desativação de unidade

### Adesão ao Programa
- Cadastro de documentos (upload)
- Solicitação de adesão, conferência da documentação e efetivação da adesão
- Integração com o SEI (autorização da alimentação do processo SEI)

### Habilitação anual
- Cadastro de documentos (upload)
- Solicitação de adesão, conferência da documentação e efetivação da adesão
- Integração com o SEI (autorização da alimentação do processo SEI)

### Plano Anual de Atividades (PAA)
- Cadastro de prioridades
- Edição e geração de documentos
- Acompanhamento da execução do PAA

## **Fase 7: Integração de Dados**

### Importação de extrato bancário (API, leitura de extratos, Gestão Ágil BB)
- Importar dados da movimentação bancária para o sistema
- Disponibilizar dados do extrato para a visualização da escola, categorização das despesas

### Integração com o SEI
- Upload dos coprovantes vinculados a despesas
- Categorização dos documentos comprobatórios
- Automatização da alimentação do processo SEI

### Leitura de notas eletrônicas
- Revisão do cadastro de despesa, documentos gerados de prestação de contas, análise de prestação de contas e banco de dados

### Integração com o SOF
- Importar os dados do SOF (valores liquidados por Unidade Educacional e por DRE)
- Notificar eventuais equívocos no preenchimento do SOF, a partir da comparação com os valores calculados por unidade

### Integração com o Sistema de Bens Patrimoniais
- Importação dos dados cadastrados no Sistema de Bens Patrimoniais
- Geração automática nos termos de doação

### Comunicação - publicização de dados
- Integração de dados com Portal SME e Escola Aberta (página sobre o PTRF)
- Integração de dados com o Portal de Dados Abertos da PMSP

# Sobre o Time

<table>
<thead>
<tr>
<th>Papel</th>
<th>Titular</th>
<th>Suplente</th>
</tr>
</thead>
<tbody>
<tr>
<td>Product Owner</td>
<td>Ananda Grinkraut</td>
<td>Meire Cristina David</td>
</tr>
<tr>
<td>Agente de Governança</td>
<td>Gabriela Rowlands</td>
<td>Fernando Gonsales</td>
</tr>
<tr>
<td>Gerente de Projeto</td>
<td>Aline F. Pinto</td>
<td>-</td>
</tr>
<tr>
<td>Scrum Master</td>
<td>Ricardo Coda</td>
<td>-</td>
</tr>
<tr>
<td>Analista UX/UI</td>
<td>Joilson Day</td>
<td>-</td>
</tr>
<tr>
<td>Analista Programador</td>
<td>Alessandro Fernandes</td>
<td>-</td>
</tr>
<tr>
<td>Analista Programador</td>
<td>Linker Oliveria</td>
<td>-</td>
</tr>
<tr>
<td>Analista Programador</td>
<td>Ollyver Ottoboni</td>
<td>-</td>
</tr>
<tr>
<td>Analista Programador</td>
<td>Lucas Rocha</td>
<td>-</td>
<tr>
<td>Analista de Negócios</td>
<td>Rayanne Felício</td>
<td>-</td>
</tbody>
</table>

# Como surgiu

## Fase de Descoberta

O desenvolvimento da aplicação iniciou-se efetivamente em janeiro de 2020 e coincidiu com processos de redesenho do PTRF. A descoberta dos principais desafios e dificuldades do programa considerou: a) a proposta de revisão normativa realizada em 2017 por um Grupo de Trabalho da rede municipal, b) diagnóstico do Programa, a partir de entrevistas e análise de dados de sua execução, e c) estudos realizados em universidades sobre a descentralização de recursos financeiros para as unidades educacionais no município de São Paulo. 

Vale destacar que entre 2018 e 2019 várias iniciativas culminaram na ampliação do Programa e na necessidade de realização de adequações legais e normativas, sendo elas: a) a incorporação de novas ações: Volta às Aulas, Fazendo Futuro, Rolê Cultural, Grêmios Estudantil, Imprensa Jovem, Mais Escola e Formação; b) a transição do atual meio de pagamento – o cheque – pelo cartão de controle de despesas; e c) a migração dos processos para o Sistema Eletrônico de Informações. Apesar de sua importância para a manutenção das unidades educacionais e para a viabilização de parte de seus projetos pedagógicos, desde sua criação, há 14 anos, o Programa não passou por nenhum processo de atualização. 
Assim, concomitantemente ao desenvolvimento da aplicação para o Programa, tem-se revisto suas normativas de forma a modernizar e simplificar os procedimentos de uso e prestação de contas do PTRF. 

**Entrevista com a área de negócio:**
A primeira reunião entre as equipes do PTRF (DIACON/COPLAN/SME) e da AMcom, em conjunto com a COTIC/SME ocorreu em 16/01/2020. Em 24/01, a equipe da AMcom apresentou o primeiro desenho de produto, com base nas demandas e diagnóstico realizado pela SME.

**Oficinas:**

Uma série de oficinas de cocriação, protótipos e testes de usuários foram realizados para criação e validação das soluções oferecidas pelo sistema. Também são previstas novas oficinas e testes para funcionalidades futuras.

## Protótipos

**Protótipo navegável da prestação de contas da Associação:** 

[https://www.figma.com/proto/iaOuJhddfKRep92yQmAWEi/PTRF-sprint03?node-id=1279%3A481&viewport=903%2C495%2C0.125&scaling=min-zoom](https://www.figma.com/proto/iaOuJhddfKRep92yQmAWEi/PTRF-sprint03?node-id=1279%3A481&viewport=903%2C495%2C0.125&scaling=min-zoom "https://www.figma.com/proto/iaOuJhddfKRep92yQmAWEi/PTRF-sprint03?node-id=1279%3A481&viewport=903%2C495%2C0.125&scaling=min-zoom")

**Protótipo navegável da Diretoria:** 

[https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=234%3A2499&viewport=1019%2C1832%2C0.125&scaling=min-zoom](https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=234%3A2499&viewport=1019%2C1832%2C0.125&scaling=min-zoom "https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=234%3A2499&viewport=1019%2C1832%2C0.125&scaling=min-zoom")

**Protótipo navegável do cálculo de repasses da Secretaria:** 

[https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=204%3A264&viewport=590%2C381%2C0.125&scaling=min-zoom](https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=204%3A264&viewport=590%2C381%2C0.125&scaling=min-zoom "https://www.figma.com/proto/6uptsXtau28gVruupqHibV/PTRF-sprint06?node-id=204%3A264&viewport=590%2C381%2C0.125&scaling=min-zoom")

## Testes de Usabilidade:

**Testes realizados com o protótipo da Associação:**

[https://github.com/prefeiturasp/SME-DesignServicos/tree/master/docs/3-novas-demandas/PTRF/videos-teste-usabilidade-2020-05-03](https://github.com/prefeiturasp/SME-DesignServicos/tree/master/docs/3-novas-demandas/PTRF/videos-teste-usabilidade-2020-05-03 "https://github.com/prefeiturasp/SME-DesignServicos/tree/master/docs/3-novas-demandas/PTRF/videos-teste-usabilidade-2020-05-03")

**Anotações referentes aos testes realizados com o protótipo da Associação:**

[https://github.com/prefeiturasp/SME-DesignServicos/blob/master/docs/3-novas-demandas/PTRF/anotacoes-teste-prototipo.docx](https://github.com/prefeiturasp/SME-DesignServicos/blob/master/docs/3-novas-demandas/PTRF/anotacoes-teste-prototipo.docx "https://github.com/prefeiturasp/SME-DesignServicos/blob/master/docs/3-novas-demandas/PTRF/anotacoes-teste-prototipo.docx")

# Links Úteis

**Homologação:**

[https://hom-sig.escola.sme.prefeitura.sp.gov.br/](https://hom-sig.escola.sme.prefeitura.sp.gov.br/)

**Produção:**

Ainda não entrou em produção.

# Comunicação

| Canal de comunicação | Objetivos |
|----------------------|-----------|
| [Issues do Github](https://github.com/prefeiturasp/SME-PTRF/issues) | - Sugestão de novas funcionalidades<br> - Reportar bugs<br> - Discussões técnicas |

# Como contribuir

Contribuições são **super bem vindas**! Se você tem vontade de construir o PTRF conosco, veja o nosso [guia de contribuição](./CONTRIBUTING.md) onde explicamos detalhadamente como trabalhamos e de que formas você pode nos ajudar a alcançar nossos objetivos. Lembrando que todos devem seguir  nosso [código de conduta](./CODEOFCONDUCT.md).

# Repositórios

[SME-PTRF-BackEnd](https://github.com/prefeiturasp/SME-PTRF-BackEnd)

[SME-PTRF-FrontEnd](https://github.com/prefeiturasp/SME-PTRF-FrontEnd)

# Instalação e Configuração para desenvolvimento

Esse é o repositório central do projeto PTRF e as issues estão nele, mas ele é basicamente infra. O repositório da API em Django é:  [SME-PTRF-BackEnd](https://github.com/prefeiturasp/SME-PTRF-BackEnd) issues com a tag API viram PRs nele. Já o react é:  [SME-PTRF-FrontEnd](https://github.com/prefeiturasp/SME-PTRF-FrontEnd) issues com a tag interface viram PRs nele.

## Para contribuir com o desenvolvimento da API

I)  Clone o repositório.
```console
$ git clone https://github.com/prefeiturasp/SME-PTRF-BackEnd.git back
$ cd back
```

II)  Crie um Virtualenv com Python 3.6
```console
$ python -m venv .venv
```

III.  Ative o Virtualenv.
```console
$ source .venv/bin/activate
```

IV.  Instale as dependências.
```console
$ pip install -r requirements\local.txt
```

V.  Configure a instância com o .env
```console
$ cp env_sample .env
```

VI.  Execute os testes.
```console
$ pytest
```

VII.  Faça um Pull Request com o seu desenvolvimento

## Executando com docker 

I. Clone o repositório
```console
$ git clone git@github.com:prefeiturasp/SME-PTRF-BackEnd.git back
```

II. Entre no diretório criado
```console
$ cd back
```

III. cp env_sample .env
```console
$ cp env-sample
```

IV. Execute o docker
```console
$ docker-compose -f local.yml up --build -d
```

V. Crie um super usuário no container criado
```console
$ docker-compose -f local.yml run --rm django sh -c "python manage.py createsuperuser"
```

VI. Acesse a url para verificar a versão (Faça o login primeiro com o usuário criado).
```console
http://localhost:8000/api/versao
```

### Filas Celery
**Subir o Celery Worker**
```console
$ celery  -A config worker --loglevel=info
```

**Subir o Celery Beat**
```console
$ celery  -A config beat --loglevel=info
```

**Monitorar os processos no celery**
```console
$ flower -A config --port=5555
```

**Limpar os processos no celery**
```console
$ celery  -A config purge
```

## Para contribuir com o desenvolvimento do front:

I) Clone o repositório.

```console
$ git clone https://github.com/prefeiturasp/SME-PTRF-FrontEnd.git front
$ cd front
```

II. Instale as dependências.

```console
$ npm i
```

III. Configure a instância com o .env

```console
$ cp env_sample .env
```

IV. Execute os testes.

```console
$ npm test
```

V. Execute a aplicação.

```console
$ npm start
```
